{
  "version": 3,
  "sources": ["src/cpt.js", "src/settings.js", "src/admin.js"],
  "sourcesContent": ["/**\n * WP 3D Model Viewer - CPT Admin JavaScript\n * Handles custom post type admin functionality including interactive 3D preview\n * \n * @package WP_3D_Model_Viewer\n * @version 2.0.0\n */\n\n// Load model-viewer library for admin preview\nconst loadModelViewerLibrary = () => {\n    return new Promise((resolve, reject) => {\n        if (window.customElements && window.customElements.get('model-viewer')) {\n            resolve();\n            return;\n        }\n\n        const script = document.createElement('script');\n        script.type = 'module';\n        script.src = 'https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js';\n        script.onload = resolve;\n        script.onerror = reject;\n        document.head.appendChild(script);\n    });\n};\n\n// Initialize admin 3D preview functionality\nconst initAdmin3DPreview = () => {\n    const preview = document.getElementById('wp3d-admin-preview');\n    const captureBtn = document.getElementById('wp3d-capture-position');\n    const resetBtn = document.getElementById('wp3d-reset-position');\n    const statusIndicator = document.getElementById('wp3d-status-indicator');\n    const statusText = document.getElementById('wp3d-position-text');\n    const cameraOrbitInput = document.getElementById('wp3d_camera_orbit');\n    const cameraTargetInput = document.getElementById('wp3d_camera_target');\n\n    if (!preview || !captureBtn || !resetBtn) {\n        return;\n    }\n\n    let isModelLoaded = false;\n    let originalOrbit = '0deg 75deg 105%';\n    let originalTarget = 'auto auto auto';\n\n    // Store original values\n    if (cameraOrbitInput && cameraOrbitInput.value) {\n        originalOrbit = cameraOrbitInput.value;\n    }\n    if (cameraTargetInput && cameraTargetInput.value) {\n        originalTarget = cameraTargetInput.value;\n    }\n\n    // Wait for model to load\n    preview.addEventListener('load', () => {\n        isModelLoaded = true;\n        statusText.textContent = 'Model loaded. Position it and click capture.';\n        captureBtn.disabled = false;\n    });\n\n    preview.addEventListener('error', () => {\n        statusText.textContent = 'Error loading model.';\n        captureBtn.disabled = true;\n        statusIndicator.className = 'wp3d-status-indicator error';\n    });\n\n    // Track camera changes\n    preview.addEventListener('camera-change', () => {\n        if (isModelLoaded) {\n            statusIndicator.className = 'wp3d-status-indicator modified';\n            statusText.textContent = 'Camera position changed. Click capture to save.';\n        }\n    });\n\n    // Capture current position\n    captureBtn.addEventListener('click', () => {\n        if (!isModelLoaded) {\n            alert('Please wait for the model to load before capturing position.');\n            return;\n        }\n\n        try {\n            const orbit = preview.getCameraOrbit();\n            const target = preview.getCameraTarget();\n\n            // Format orbit: theta phi radius\n            const orbitString = `${orbit.theta.toFixed(3)}rad ${orbit.phi.toFixed(3)}rad ${orbit.radius.toFixed(3)}m`;\n            \n            // Format target: x y z\n            const targetString = `${target.x.toFixed(3)}m ${target.y.toFixed(3)}m ${target.z.toFixed(3)}m`;\n\n            // Update form fields\n            cameraOrbitInput.value = orbitString;\n            cameraTargetInput.value = targetString;\n\n            // Update status\n            statusIndicator.className = 'wp3d-status-indicator captured';\n            statusText.textContent = 'Position captured successfully!';\n\n            // Show success feedback\n            captureBtn.style.background = '#46b450';\n            captureBtn.style.borderColor = '#46b450';\n            setTimeout(() => {\n                captureBtn.style.background = '';\n                captureBtn.style.borderColor = '';\n            }, 1000);\n\n        } catch (error) {\n            console.error('Error capturing camera position:', error);\n            alert('Error capturing camera position. Please try again.');\n        }\n    });\n\n    // Reset to default position\n    resetBtn.addEventListener('click', () => {\n        if (!isModelLoaded) {\n            alert('Please wait for the model to load before resetting position.');\n            return;\n        }\n\n        try {\n            // Reset to original position\n            preview.cameraOrbit = originalOrbit;\n            preview.cameraTarget = originalTarget;\n\n            // Update form fields\n            cameraOrbitInput.value = originalOrbit;\n            cameraTargetInput.value = originalTarget;\n\n            // Update status\n            statusIndicator.className = 'wp3d-status-indicator';\n            statusText.textContent = 'Position reset to default.';\n\n        } catch (error) {\n            console.error('Error resetting camera position:', error);\n            alert('Error resetting camera position. Please try again.');\n        }\n    });\n\n    // Initial state\n    captureBtn.disabled = !isModelLoaded;\n};\n\n// Enhanced media uploader functionality\nconst initMediaUploader = () => {\n    const $ = jQuery;\n    const mediaUploaders = {};\n\n    $('.wp3d-upload-button').on('click', function(e) {\n        e.preventDefault();\n        \n        const button = $(this);\n        const targetId = button.data('target');\n        const title = button.data('title');\n        const buttonText = button.data('button');\n        \n        // If the media frame already exists, reopen it\n        if (mediaUploaders[targetId]) {\n            mediaUploaders[targetId].open();\n            return;\n        }\n        \n        // Create the media frame\n        mediaUploaders[targetId] = wp.media.frames.file_frame = wp.media({\n            title: title,\n            button: {\n                text: buttonText\n            },\n            multiple: false\n        });\n        \n        // When an image is selected, run a callback\n        mediaUploaders[targetId].on('select', function() {\n            const attachment = mediaUploaders[targetId].state().get('selection').first().toJSON();\n            \n            // Set the attachment ID to the hidden field\n            $('#' + targetId).val(attachment.id);\n            \n            // Show the remove button\n            button.siblings('.wp3d-remove-button').show();\n            \n            // Update the preview\n            updateFilePreview(targetId, attachment);\n\n            // If this is the model file and we have a preview, update it\n            if (targetId === 'wp3d_model_file') {\n                const preview = document.getElementById('wp3d-admin-preview');\n                if (preview) {\n                    preview.src = attachment.url;\n                    preview.style.display = 'block';\n                    // Refresh the preview section\n                    location.reload();\n                }\n            }\n        });\n        \n        // Finally, open the modal\n        mediaUploaders[targetId].open();\n    });\n\n    // Remove file functionality\n    $('.wp3d-remove-button').on('click', function(e) {\n        e.preventDefault();\n        \n        const button = $(this);\n        const targetId = button.data('target');\n        \n        // Clear the hidden field\n        $('#' + targetId).val('');\n        \n        // Hide the remove button\n        button.hide();\n        \n        // Clear the preview\n        $('#' + targetId + '_preview').empty();\n\n        // If this is the model file, hide the preview\n        if (targetId === 'wp3d_model_file') {\n            const preview = document.getElementById('wp3d-admin-preview');\n            if (preview) {\n                preview.style.display = 'none';\n            }\n        }\n    });\n\n    /**\n     * Update file preview based on attachment type\n     */\n    function updateFilePreview(targetId, attachment) {\n        const preview = $('#' + targetId + '_preview');\n        let html = '';\n        \n        if (attachment.type === 'image') {\n            // Show image thumbnail\n            html = '<img src=\"' + attachment.sizes.thumbnail.url + '\" alt=\"' + attachment.alt + '\" style=\"max-width: 150px; border-radius: 4px;\" />';\n        } else {\n            // Show file info for non-images\n            html = '<p><strong>Selected file:</strong> ' + attachment.filename + '</p>';\n            html += '<p><small>' + attachment.url + '</small></p>';\n        }\n        \n        preview.html(html);\n    }\n\n    // Initialize existing file previews\n    $('.wp3d-upload-button').each(function() {\n        const targetId = $(this).data('target');\n        const fileId = $('#' + targetId).val();\n        \n        if (fileId) {\n            $(this).siblings('.wp3d-remove-button').show();\n        }\n    });\n};\n\n// Initialize everything when DOM is ready\njQuery(document).ready(function($) {\n    // Load model-viewer library and initialize preview\n    loadModelViewerLibrary()\n        .then(() => {\n            // Wait a bit for the library to fully initialize\n            setTimeout(initAdmin3DPreview, 500);\n        })\n        .catch(error => {\n            console.error('Failed to load model-viewer library:', error);\n        });\n\n    // Initialize media uploader\n    initMediaUploader();\n\n    // Copy shortcode functionality for list table\n    $(document).on('click', '.wp-3d-model-viewer-shortcode code', function() {\n        const text = $(this).text();\n        \n        if (navigator.clipboard) {\n            navigator.clipboard.writeText(text).then(function() {\n                // Visual feedback\n                const $code = $(this);\n                const originalBg = $code.css('background-color');\n                $code.css('background-color', '#46b450');\n                setTimeout(function() {\n                    $code.css('background-color', originalBg);\n                }, 500);\n            });\n        }\n    });\n\n    // Auto-hide WordPress notices for better UX in 3D model admin\n    if ($('body').hasClass('post-type-3d_model')) {\n        setTimeout(function() {\n            $('.notice.is-dismissible').fadeOut();\n        }, 3000);\n    }\n});\n\nconsole.log('Enhanced CPT JS loaded with 3D preview functionality');", "/**\n * WP 3D Model Viewer - Settings Page JavaScript\n * Handles settings page functionality\n * \n * @package WP_3D_Model_Viewer\n * @version 2.0.0\n */\n\nconsole.log('Settings JS loaded');", "/**\n * WP 3D Model Viewer - Main Admin JavaScript\n * Entry point for all admin JavaScript functionality\n * \n * @package WP_3D_Model_Viewer\n * @version 2.0.0\n */\n\n// Import existing functionality\nimport './cpt.js';\nimport './settings.js';\n\nconsole.log('WP 3D Model Viewer admin JS loaded');"],
  "mappings": "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",
  "names": []
}
